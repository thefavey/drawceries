(this.webpackJsonpdrawceries=this.webpackJsonpdrawceries||[]).push([[0],{16:function(e,t,a){e.exports=a(27)},21:function(e,t,a){},27:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),c=a(11),o=a.n(c),l=(a(21),a(5)),i=a(2),u=[{name:"Bread",quantity:"5",category:"Red",addedBy:"Nancy",addedOn:new Date(2020,4,8),isBought:!1},{name:"Water",quantity:"2L",category:"Blue",addedBy:"Fred",addedOn:new Date(2020,3,25),isBought:!1},{name:"Cheese",quantity:"50",category:null,addedBy:"Aya",addedOn:new Date(2020,1,30),isBought:!0,boughtBy:"Fred",boughtOn:new Date(2020,2,1),price:50},{name:"Wine",quantity:"3L",category:null,addedBy:"Marcel",addedOn:new Date(2020,2,2),isBought:!0,boughtBy:"Charles",boughtOn:new Date(2020,2,10),price:15},{name:"Beer",quantity:"5L",category:null,addedBy:"Marcel",addedOn:new Date(2020,2,2),isBought:!0,boughtBy:"Julia",boughtOn:new Date(2020,2,10),price:20},{name:"M&M's",quantity:"5kg",category:null,addedBy:"Didier",addedOn:new Date(2020,1,4),isBought:!0,boughtBy:"Charles",boughtOn:new Date(2020,3,5),price:20}],s=["Blue","Red"],m=a(4),d=(a(3),function(e){var t=e.handleLoginClick,a=(e.currentUser,e.loginPopupState);return n.a.createElement("div",{className:"header"},n.a.createElement("div",{className:"title"},n.a.createElement("span",{className:"draw"},"DRAW"),n.a.createElement("span",{className:"ceries"},"CERIES")),n.a.createElement("div",{className:"loginButton",onClick:function(){t()}},n.a.createElement(m.e,{className:"loginIcon"+(a?"Highlighted":"")})))}),p=a(12),g=a(13),b=a(14),y=function(e){var t=e.tabName,a=e.currentTab,r=e.handleTabClick;return n.a.createElement("button",{className:"tabButton",onClick:r(t)},"list"===t?n.a.createElement(p.a,{className:"tabIcon"+("list"===a?"Highlighted":"")}):"stats"===t?n.a.createElement(g.a,{className:"tabIcon"+("stats"===a?"Highlighted":"")}):"recipes"===t?n.a.createElement(b.a,{className:"tabIcon"+("recipes"===a?"Highlighted":"")}):"")},f=function(e){var t=e.tabList,a=e.currentTab,r=e.handleTabClick;return n.a.createElement("div",{className:"nav"},t.map((function(e){return n.a.createElement(y,{key:e,tabName:e,currentTab:a,handleTabClick:r})})))},v=function(e){var t=e.title,a=e.children,r=e.closePopup,c=e.cancelPopup,o=e.anim;return n.a.createElement("div",{className:"popup "+(o||"")},n.a.createElement("div",{className:"popupTitle"},n.a.createElement("span",null,t),n.a.createElement(m.b,{className:"closePopup",onClick:c||r})),n.a.createElement("div",{className:"popupBody"},a))},E=function(e){var t=e.label,a=e.buttonClass,c=(e.question,e.handleConfirm),o=Object(r.useState)(!1),l=Object(i.a)(o,2),u=l[0],s=l[1];return u?n.a.createElement("div",{className:"confirmationPrompt "+a},n.a.createElement("div",null,"Are you sure?"),n.a.createElement("div",null,n.a.createElement(m.c,{className:"sureIcon",onClick:function(){return s(!1)}}),n.a.createElement(m.a,{className:"sureIcon",onClick:c}))):n.a.createElement("div",{className:"confirmation "+a,onClick:function(){return s(!0)}},n.a.createElement("div",null,t))},h=function(e){var t=e.currentUser,a=e.handleUserChange,r=e.closeLogin,c=e.cancelLogin;return n.a.createElement(v,{title:c?"Please log in":t?"Current user: "+t:"",closePopup:r,cancelPopup:c,anim:"dropAnim"},n.a.createElement("form",{className:"popupForm",onSubmit:function(e){a(e.target.user.value),r()}},n.a.createElement("div",{className:"formItem"},n.a.createElement("input",{name:"user",type:"text",placeholder:"User name",required:!0})),n.a.createElement("div",{className:"popupButton"+(t?"s":"")},t&&n.a.createElement(E,{label:"Log out",buttonClass:"halfButton red",handleConfirm:function(){a(null),r()}}),t&&n.a.createElement("div",{className:"verticalBorder"}),n.a.createElement("button",{className:"green "+(t?"halfButton":"fullButton"),type:"submit"},t?"Switch user":"Log in"))))},C=function(e){var t=e.groceryCategories,a=e.handleChange;return n.a.createElement("select",{className:"categoriesDropdown",name:"categories",onChange:a,"aria-label":"select category"},["Select category"].concat(Object(l.a)(t)).map((function(e){return n.a.createElement("option",{key:e,value:e},e)})))},N=function(e){var t=e.openPopup;return n.a.createElement(m.d,{className:"addCategoryButton",onClick:t})},O=function(e){var t=e.groceryCategories,a=e.handleChange,r=e.openPopup;return n.a.createElement("div",{className:"groceryCategories"},n.a.createElement(C,{groceryCategories:t,handleChange:a}),n.a.createElement(N,{openPopup:r}))},w=function(e){var t=e.openPopup;return n.a.createElement("button",{className:"addGroceryButton",onClick:t},"Add grocery")},B=function(e){var t=e.item,a=e.openPopup,r=(e.closePopup,e.handleItemClick);return n.a.createElement("div",{className:"groceryItem"+(t.isBought?" greyed":""),onClick:function(e){e.preventDefault(),t.isBought?(r(t),a("boughtItem")):(r(t),a("unboughtItem"))}},n.a.createElement("span",null,t.name+" ("+t.quantity+")"))},j=function(e){var t=e.label,a=e.filteredGroceries,c=e.collapsedProp,o=e.openPopup,l=e.handleItemClick,u=Object(r.useState)(c),s=Object(i.a)(u,2),m=s[0],d=s[1];return n.a.createElement("div",{className:"collapsibleList"},n.a.createElement("div",{className:"collapsibleLabel",onClick:function(){d(!m)}},(m?"\u25b6 ":"\u25bc ")+t),!m&&n.a.createElement("div",{className:"itemList"},a.map((function(e){return n.a.createElement(B,{key:e.name,item:e,openPopup:o,handleItemClick:l})}))))},S=function(e){var t=e.filteredGroceries,a=e.openPopup,r=(e.closePopup,e.handleItemClick);return n.a.createElement("div",{className:"groceryList"},n.a.createElement(j,{label:"Not bought yet",collapsedProp:!1,filteredGroceries:t.filter((function(e){return!1===e.isBought})),openPopup:a,handleItemClick:r}),n.a.createElement(j,{label:"Bought items",collapsedProp:!0,filteredGroceries:t.filter((function(e){return!0===e.isBought})),openPopup:a,handleItemClick:r}))},k=function(e){return e.toLocaleDateString("en-GB",{day:"numeric",month:"long"})},P=function(){var e=(new Date).setHours(0,0,0,0);return new Date(e)},D=function(e){var t=e.groceryCategories,a=e.closePopup,c=e.addGrocery,o=e.groceriesDict,u=e.currentUser,s=Object(r.useState)(""),m=Object(i.a)(s,2),d=m[0],p=m[1];return n.a.createElement(v,{title:"Add grocery to list",closePopup:a,anim:"liftAnim"},n.a.createElement("form",{className:"popupForm",onSubmit:function(e){e.preventDefault();var t=e.target.name.value,r=e.target.quantity.value,n=e.target.category.value;o.map((function(e){return e.name.toLowerCase()})).indexOf(t.toLowerCase())>-1?p("item already in list"):(c({name:t,quantity:r||null,category:"Category"!==n?n:null,addedBy:u,addedOn:P(),isBought:!1}),a())}},n.a.createElement("div",{className:"formItem"},n.a.createElement("input",{"aria-label":"name",name:"name",type:"text",placeholder:"Name",required:!0})),n.a.createElement("div",{className:"formItem"},n.a.createElement("input",{"aria-label":"quantity",name:"quantity",type:"text",placeholder:"Quantity"})),n.a.createElement("div",{className:"formItem"},n.a.createElement("select",{"aria-label":"category",name:"category"},["Category"].concat(Object(l.a)(t)).map((function(e){return n.a.createElement("option",{key:e,value:e},e)})))),d&&n.a.createElement("p",null,d),n.a.createElement("div",{className:"popupButton"},n.a.createElement("button",{className:"green fullButton",type:"submit"},"Add grocery"))))},G=function(e){var t=e.groceryCategories,a=e.addCategory,c=e.closePopup,o=Object(r.useState)(""),l=Object(i.a)(o,2),u=l[0],s=l[1];return n.a.createElement(v,{title:"",closePopup:c,anim:"dropAnim"},n.a.createElement("form",{className:"popupForm",onSubmit:function(e){e.preventDefault();var r=e.target.name.value;t.map((function(e){return e.toLowerCase()})).indexOf(r.toLowerCase())>-1?s("category exists"):(a(r),c())}},n.a.createElement("div",null,n.a.createElement("input",{"aria-label":"category name",name:"name",type:"text",placeholder:"Category name",required:!0})),u&&n.a.createElement("p",null,u),n.a.createElement("div",{className:"popupButton"},n.a.createElement("button",{className:"green fullButton",type:"submit"},"Add category"))))},I=function(e){var t=e.grocery,a=e.unbuyGrocery,r=e.closePopup;return n.a.createElement(v,{title:t.name,closePopup:r,anim:"scaleAnim"},n.a.createElement("span",{className:"popupInfo"},"Bought by "+t.boughtBy+" on "+k(t.boughtOn)+" for "+t.price+"\u20ac."),n.a.createElement("div",{className:"popupButton"},n.a.createElement(E,{label:"Unbuy",buttonClass:"red fullButton",handleConfirm:function(){a(t),r()}})))},L=function(e){var t=e.grocery,a=e.buyGrocery,r=e.removeGrocery,c=e.closePopup,o=e.currentUser;return n.a.createElement(v,{title:t.name+(t.quantity?" ("+t.quantity+")":""),closePopup:c,anim:"scaleAnim"},n.a.createElement("span",{className:"popupInfo"},"Added by "+t.addedBy+" on "+k(t.addedOn)+"."),n.a.createElement("form",{className:"popupForm",onSubmit:function(e){e.preventDefault();var r=parseInt(e.target.price.value);a(t,r,o),c()}},n.a.createElement("div",{className:"formItem"},n.a.createElement("input",{"aria-label":"price",name:"price",type:"number",step:"0.01",placeholder:"Price (in \u20ac)",required:!0})),n.a.createElement("div",{className:"popupButtons"},n.a.createElement(E,{label:"Remove",buttonClass:"halfButton red",handleConfirm:function(){r(t),c()}}),n.a.createElement("div",{className:"verticalBorder"}),n.a.createElement("button",{className:"halfButton green",type:"submit"},"Buy"))))},U=function(e){var t=e.popupType,a=e.groceryCategories,c=e.closePopup,o=e.addGrocery,l=e.unbuyGrocery,u=e.buyGrocery,s=e.removeGrocery,m=e.addCategory,d=e.groceriesDict,p=e.clickedItem,g=e.currentUser,b=e.handleUserChange,y=Object(r.useState)(!!g),f=Object(i.a)(y,2),v=f[0],E=f[1];if(!t)return null;if(!v)return n.a.createElement(h,{currentUser:g,handleUserChange:b,closeLogin:function(){return E(!0)},cancelLogin:c});switch(t){case"newGrocery":return n.a.createElement(D,{groceryCategories:a,closePopup:c,addGrocery:o,groceriesDict:d,currentUser:g});case"newCategory":return n.a.createElement(G,{closePopup:c,addCategory:m,groceriesDict:d,groceryCategories:a});case"boughtItem":return n.a.createElement(I,{grocery:p,unbuyGrocery:l,closePopup:c});case"unboughtItem":return n.a.createElement(L,{grocery:p,buyGrocery:u,removeGrocery:s,closePopup:c,currentUser:g});default:return null}},x=function(e){var t=e.groceryCategoriesDb,a=e.groceriesDb,c=e.addGrocery,o=e.buyGrocery,l=e.unbuyGrocery,u=e.removeGrocery,s=e.addCategory,m=e.currentUser,d=e.handleUserChange,p=Object(r.useState)("Select category"),g=Object(i.a)(p,2),b=g[0],y=g[1],f=Object(r.useState)(null),v=Object(i.a)(f,2),E=v[0],h=v[1],C=Object(r.useState)(null),N=Object(i.a)(C,2),B=N[0],j=N[1],k=Object(r.useState)(null),P=Object(i.a)(k,2),D=P[0],G=P[1],I=Object(r.useState)(null),L=Object(i.a)(I,2),x=L[0],T=L[1];Object(r.useEffect)((function(){j(a),h(t)}),[a,t]);var q=function(e){G(e)},A=function(){T(null),G(null)};return B&&E?n.a.createElement("div",null,n.a.createElement(U,{popupType:D,groceryCategories:E,closePopup:A,addGrocery:c,buyGrocery:o,unbuyGrocery:l,removeGrocery:u,addCategory:s,groceriesDict:B,clickedItem:x,currentUser:m,handleUserChange:d}),n.a.createElement("div",{className:"view"+(D?" blur":"")},n.a.createElement("div",{className:"viewContent"},n.a.createElement("div",{className:"viewTitle"},"Grocery list"),n.a.createElement(O,{groceryCategories:E,handleChange:function(e){y(e.target.value)},openPopup:function(){return q("newCategory")}}),n.a.createElement(w,{openPopup:function(){return q("newGrocery")}}),n.a.createElement(S,{filteredGroceries:B.filter((function(e){return"Select category"===b||e.category===b})),openPopup:q,handleItemClick:function(e){T(e)},closePopup:A})))):n.a.createElement("div",{className:"view"},n.a.createElement("div",{className:"viewContent"},n.a.createElement("div",{className:"viewTitle"},"Grocery list"),"Loading grocery list..."))},T=a(15),q=function(e){var t=e.groceriesDb,a=Object(r.useState)(null),c=Object(i.a)(a,2),o=c[0],l=c[1];Object(r.useEffect)((function(){var e;l([{label:"spent",data:(e=t,function(e){var t=[];return e.forEach((function(e){t.push({x:e[0],y:e[1]})})),t}(function(e){var t=function(e,t){for(var a=0,r=0;r<=t;r++)a+=e[r][1];return a};return e.map((function(a,r){return[a[0],t(e,r)]}))}(function(e){var t=[];return e.forEach((function(e){var a=t.map((function(e){return e?e[0].toISOString():null})).indexOf(e.boughtOn.toISOString());if(a>-1){var r=[t[a][0],t[a][1]+e.price];t[a]=r}else t.push([e.boughtOn,e.price])})),t}(e.filter((function(e){return e.isBought})).sort((function(e,t){return e.boughtOn>t.boughtOn?1:-1}))))))}])}),[t]);return n.a.createElement("div",{className:"chartArea"},n.a.createElement("div",{className:"chartTitle"},"Total money spent"),n.a.createElement("div",{className:"chartBox"},o&&n.a.createElement(T.Chart,{data:o,axes:[{primary:!0,type:"time",position:"bottom"},{type:"linear",position:"left"}],series:{showPoints:!1},tooltip:!0})))},A=function(e){var t=e.groceriesDb,a=Object(r.useState)(null),c=Object(i.a)(a,2),o=c[0],l=c[1];return Object(r.useEffect)((function(){l(t)}),[t]),o?n.a.createElement("div",{className:"view"},n.a.createElement("div",{className:"viewContent"},n.a.createElement("div",{className:"viewTitle"},"Stats"),n.a.createElement(q,{groceriesDb:t}))):n.a.createElement("div",{className:"view"},n.a.createElement("div",{className:"viewContent"},n.a.createElement("div",{className:"viewTitle"},"Stats"),"Loading stats..."))},R=a(6),F=a.n(R),H=a(9),M=function(e){var t=e.recipe,a=Object(r.useState)(!1),c=Object(i.a)(a,2),o=c[0],l=c[1];return n.a.createElement("div",{className:"recipeDisplay"+(o?" clickedRecipe":""),onClick:function(){l(!o)}},n.a.createElement("div",{className:"recipeImage"+(o?" clickedRecipeImage":""),style:{backgroundImage:"url(".concat(t.image,")")}}),n.a.createElement("div",null,n.a.createElement("div",{className:"recipeTitle"},t.title),o&&n.a.createElement("div",{className:"recipeButton"},n.a.createElement("button",{onClick:function(){return function(){var e=Object(H.a)(F.a.mark((function e(t){var a;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.spoonacular.com/recipes/".concat(t.toString(),"/information?apiKey=657f32e62bda4107b995812b8b98dd29"));case 2:if(200===(a=e.sent).status){e.next=7;break}console.log("error "+a.status.toString()),e.next=10;break;case 7:return e.next=9,a.json();case 9:window.location.href=e.sent.sourceUrl;case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(t.id),null}},"View recipe"))))},W=function(e){var t=e.groceriesDb,a=e.groceryCategoriesDb,c=Object(r.useState)(null),o=Object(i.a)(c,2),l=o[0],u=o[1],s=Object(r.useState)(null),m=Object(i.a)(s,2),d=m[0],p=m[1],g=Object(r.useState)(null),b=Object(i.a)(g,2),y=b[0],f=b[1],v=Object(r.useState)(null),E=Object(i.a)(v,2),h=E[0],N=E[1];Object(r.useEffect)((function(){p(t),u(a)}),[t,a]),Object(r.useEffect)((function(){d&&f(d.map((function(e){return e.name})))}),[d]),Object(r.useEffect)((function(){y&&function(){var e=Object(H.a)(F.a.mark((function e(t){var a,r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.join(",+").toLowerCase(),e.next=3,fetch("https://api.spoonacular.com/recipes/findByIngredients?apiKey=657f32e62bda4107b995812b8b98dd29&ingredients="+a);case 3:if(200===(r=e.sent).status){e.next=8;break}N([{id:"err",image:"",title:"Error loading recipes (Error code "+r.status.toString()+"). View JS console for details."}]),e.next=13;break;case 8:return e.t0=N,e.next=11,r.json();case 11:e.t1=e.sent,(0,e.t0)(e.t1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(y)}),[y]);return d&&l&&y&&h?n.a.createElement("div",{className:"view"},n.a.createElement("div",{className:"viewContent"},n.a.createElement("div",{className:"viewTitle"},"Recipes"),n.a.createElement("div",{className:"recipeDropdown"},n.a.createElement(C,{groceryCategories:l,handleChange:function(e){var t=e.target.value;f(d.filter((function(e){return"Select category"===t||e.category===t})).map((function(e){return e.name})))}})),n.a.createElement("div",{className:"recipesIntro"},"From ingredients: ",y.join(", ").toLowerCase(),"."),n.a.createElement("div",{className:"recipesList"},h.map((function(e){return n.a.createElement(M,{key:e.id.toString(),recipe:e})}))))):n.a.createElement("div",{className:"view"},n.a.createElement("div",{className:"viewContent"},n.a.createElement("div",{className:"viewTitle"},"Recipes"),"Loading recipes..."))},J=function(e){var t=e.currentTab,a=e.loginPopupState,r=e.currentUser,c=e.handleUserChange,o=e.closeLogin,l=e.groceryCategoriesDb,i=e.groceriesDb,u=e.addGrocery,s=e.buyGrocery,m=e.unbuyGrocery,d=e.removeGrocery,p=e.addCategory;if(a)return n.a.createElement("div",{className:"view"},n.a.createElement(h,{currentUser:r,handleUserChange:c,closeLogin:o}));switch(t){case"list":return n.a.createElement(x,{groceryCategoriesDb:l,groceriesDb:i,addGrocery:u,buyGrocery:s,unbuyGrocery:m,removeGrocery:d,addCategory:p,currentUser:r,handleUserChange:c});case"stats":return n.a.createElement(A,{groceriesDb:i,groceryCategoriesDb:l});case"recipes":return n.a.createElement(W,{groceriesDb:i,groceryCategoriesDb:l});default:return n.a.createElement("div",{className:"view"},t)}},K=function(){var e=Object(r.useState)(s),t=Object(i.a)(e,2),a=t[0],c=t[1],o=Object(r.useState)(u),m=Object(i.a)(o,2),p=m[0],g=m[1],b=Object(r.useState)("list"),y=Object(i.a)(b,2),v=y[0],E=y[1],h=Object(r.useState)(!1),C=Object(i.a)(h,2),N=C[0],O=C[1],w=Object(r.useState)(null),B=Object(i.a)(w,2),j=B[0],S=B[1];return n.a.createElement("div",{className:"app"},n.a.createElement(d,{handleLoginClick:function(){O(!0)},currentUser:j,loginPopupState:N}),n.a.createElement(J,{currentTab:v,loginPopupState:N,currentUser:j,handleUserChange:function(e){S(e)},closeLogin:function(){O(!1)},groceryCategoriesDb:a,groceriesDb:p,addGrocery:function(e){g([].concat(Object(l.a)(p),[e]))},buyGrocery:function(e,t,a){g(p.map((function(r){return r===e&&(r.isBought=!0,r.price=t,r.boughtBy=a,r.boughtOn=P()),r})))},unbuyGrocery:function(e){g(p.map((function(t){return t===e&&(t.isBought=!1),t})))},removeGrocery:function(e){g(p.filter((function(t){return t!==e})))},addCategory:function(e){c([].concat(Object(l.a)(a),[e]))}}),n.a.createElement(f,{tabList:["list","stats","recipes"],currentTab:v,handleTabClick:function(e){return function(){return E(e)}}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(K,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},3:function(e,t,a){}},[[16,1,2]]]);
//# sourceMappingURL=main.b91c544a.chunk.js.map